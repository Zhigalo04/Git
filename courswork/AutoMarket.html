<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoMarket - Продажа автомобилей</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="light-theme">
    <header>
        <div class="container header-content">
            <h1><a href="AutoMarket.html" class="logo-link">AutoMarket</a></h1>
            <div class="account-dropdown">
                <span id="username-display"></span>
                <button class="account-btn">
                    <i class="fas fa-user-circle"></i>
                </button>
                <div class="dropdown-content">
                    <a href="login.html">Войти</a>
                    <a href="register.html">Зарегистрироваться</a>
                    <a href="favorites.html">Избранное</a>
                    <div class="theme-switcher">
                        <span>Тема: </span>
                        <button id="lightThemeBtn">Светлая</button>
                        <button id="darkThemeBtn">Тёмная</button>
                    </div>
                </div>
            </div>
        </div>
    </header>
    
    <main class="container">
        <!-- Секция с каруселью и кнопкой -->
        <section class="carousel-section">
            <div class="carousel-container">
                <div class="carousel">
                    <img src="Carousel/Image 1.jpg" alt="Реклама 1">
                    <img src="Carousel/Image 2.png" alt="Реклама 2">
                    <img src="Carousel/Image 3.jpg" alt="Реклама 3">
                    <img src="Carousel/Image 4.jpg" alt="Реклама 4">
                    <img src="Carousel/Image 5.png" alt="Реклама 5">
                    <img src="Carousel/Image 6.jpg" alt="Реклама 6">
                </div>
                <button class="carousel-btn prev-btn"><i class="fas fa-chevron-left"></i></button>
                <button class="carousel-btn next-btn"><i class="fas fa-chevron-right"></i></button>
                <div class="carousel-indicators">
                    <div class="indicator active"></div>
                    <div class="indicator"></div>
                    <div class="indicator"></div>
                    <div class="indicator"></div>
                    <div class="indicator"></div>
                    <div class="indicator"></div>
                </div>
            </div>
            <button class="add-advertisement" id="addAdvertisementBtn">
                <i class="fas fa-plus"></i> Добавить объявление
            </button>
        </section>

        <section class="cars-list" id="carsListContainer">
            <!-- Карточки будут добавляться динамически -->
        </section>
        
        <hr>
        
        <section class="cars-list">
            <article class="car-card">
                <a href="product/toyota-camry.html" class="car-link">
                    <img src="Images/Toyota Camry/Image 1.webp" alt="Toyota Camry" class="car-image">
                    <div class="car-info">
                        <h3 class="car-model">Toyota Camry US Market VIII (XV70)</h3>
                        <p class="car-specs">2020 год выпуска<br>Двигатель: 2.5 л (248 л.с.)<br>Коробка: автомат<br>Пробег: 50 000 км</p>
                        <p class="car-price">18 000 $</p>
                    </div>
                </a>
                <button class="favorite-btn"><i class="far fa-heart"></i> В избранное</button>
            </article>
            
            <article class="car-card">
                <a href="product/bmw-x5.html" class="car-link">
                <img src="Images/BMW X5/Image 1.jpg" alt="BMW X5" class="car-image">
                <div class="car-info">
                    <h3 class="car-model">BMW X5 xDrive30d AT M Sport</h3>
                    <p class="car-specs">2018 год выпуска<br>Двигатель: 3.0 л (340 л.с.)<br>Коробка: автомат<br>Пробег: 80 000 км</p>
                    <p class="car-price">32 000 $</p>
                </div>
            </a>
            <button class="favorite-btn"><i class="far fa-heart"></i> В избранное</button>
            </article>
            
            <article class="car-card">
                <a href="product/mercedes-glc.html" class="car-link">
                <img src="Images/Mercedes-Benz/Image 1.jpg" alt="Mercedes-Benz" class="car-image">
                <div class="car-info">
                    <h3 class="car-model">Mercedes-Benz GLC AMG X253</h3>
                    <p class="car-specs">2018 год выпуска<br>Двигатель: 4.0 л (476 л.с.)<br>Коробка: автомат<br>Пробег: 85 000 км</p>
                    <p class="car-price">50 000 $</p>
                </div>
            </a>
            <button class="favorite-btn"><i class="far fa-heart"></i> В избранное</button>
            </article>

            <article class="car-card">
                <a href="Product/audi-rs5.html" class="car-link">
                <img src="Images/Audi RS5/Image 1.jpg" alt="Audi RS5 II" class="car-image">
                <div class="car-info">
                    <h3 class="car-model">Audi RS5 II</h3>
                    <p class="car-specs">2019 год выпуска<br>Двигатель: 2.9 л (450 л.с.)<br>Коробка: автомат<br>Пробег: 38 000 км</p>
                    <p class="car-price">62 000 $</p>
                </div>
            </a>
            <button class="favorite-btn"><i class="far fa-heart"></i> В избранное</button>
            </article>

            <article class="car-card">
                <a href="Product/vw-tiguan.html" class="car-link">
                <img src="Images/Volkswagen Tiguan/Image 1.jpg" alt="Volkswagen Tiguan" class="car-image">
                <div class="car-info">
                    <h3 class="car-model">Volkswagen Tiguan Allspace II</h3>
                    <p class="car-specs">2021 год выпуска<br>Двигатель: 2.0 л (187 л.с.)<br>Коробка: автомат<br>Пробег: 69 000 км</p>
                    <p class="car-price">26 300 $</p>
                </div>
            </a>
            <button class="favorite-btn"><i class="far fa-heart"></i> В избранное</button>
            </article>

            <article class="car-card">
                <a href="Product/dodge-challenger.html" class="car-link">
                <img src="Images/Dodge Challenger/Image 1.jpg" alt="Dodge Challenger" class="car-image">
                <div class="car-info">
                    <h3 class="car-model">Dodge Challenger III</h3>
                    <p class="car-specs">2021 год выпуска<br>Двигатель: 3.6 л (309 л.с.)<br>Коробка: автомат<br>Пробег: 13 500 км</p>
                    <p class="car-price">33 500 $</p>
                </div>
            </a>
            <button class="favorite-btn"><i class="far fa-heart"></i> В избранное</button>
            </article>
        </section>
    </main>

    <footer>
        <div class="container">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <p>© 2025 AutoMarket. Все права защищены.</p>
                <div style="text-align: right;">
                    <a href="https://yandex.by/maps/-/CHvIeO9B" target="_blank" style="text-decoration: none; display: block; margin-bottom: 5px;">
                        <i class="fas fa-map-marker-alt"></i> Мы находимся тут
                    </a>
                    <a href="tel:+79991234567" style="text-decoration: none; display: block;">
                        <i class="fas fa-phone"></i> +375 (29) 316-06-78
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script src="main.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Определяем стандартные объявления
            const defaultAds = [
               
                // Добавьте остальные стандартные объявления по аналогии
            ];
    
            // Обработчик для кнопки добавления объявления
            const addBtn = document.getElementById('addAdvertisementBtn');
            if (addBtn) {
                addBtn.addEventListener('click', function() {
                    const currentUser = JSON.parse(localStorage.getItem('currentUser'));
                    if (currentUser) {
                        window.location.href = 'add_page.html';
                    } else {
                        window.location.href = 'login.html';
                    }
                });
            }
    
            // Функция для загрузки и отображения объявлений
            function loadAds() {
                const carsList = document.getElementById('carsListContainer');
                if (!carsList) return;
    
                // Очищаем контейнер перед загрузкой
                carsList.innerHTML = '';
    
                // Загружаем пользовательские объявления из localStorage
                const userAds = JSON.parse(localStorage.getItem('carAds')) || [];
    
                // Объединяем и отображаем все объявления
                [...defaultAds, ...userAds].forEach(ad => {
                    const carCard = document.createElement('article');
                    carCard.className = 'car-card';
                    
                    // Проверяем и добавляем ID, если его нет
                    if (!ad.id) {
                        ad.id = 'ad-' + Math.random().toString(36).substr(2, 9);
                    }
    
                    carCard.innerHTML = `
    <a href="product_advertisement.html?id=${ad.id}" class="car-link">
        <img src="${ad.images?.[0]?.data || 'images/default-car.jpg'}" alt="${ad.title}" class="car-image">
                            <div class="car-info">
                                <h3 class="car-model">${ad.title}</h3>
                                <p class="car-specs">${ad.year} год выпуска<br>Двигатель: ${ad.engine}<br>Коробка: ${ad.transmission}<br>Пробег: ${ad.mileage}</p>
                                <p class="car-price">${ad.price}</p>
                            </div>
                        </a>
                        <div class="card-actions">
                            <button class="favorite-btn"><i class="far fa-heart"></i> В избранное</button>
                            ${JSON.parse(localStorage.getItem('currentUser'))?.username === ad.seller ? 
                                `<button class="delete-ad-btn" data-ad-id="${ad.id}"><i class="fas fa-trash"></i> Удалить</button>` : ''}
                        </div>
                    `;
                    
                    carsList.appendChild(carCard);
                });
    
                // Инициализируем кнопки избранного
                const favoriteBtns = document.querySelectorAll('.favorite-btn');
                favoriteBtns.forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        
                        const carCard = this.closest('.car-card');
                        const model = carCard.querySelector('.car-model').textContent;
                        let favorites = JSON.parse(localStorage.getItem('favoriteCars')) || [];
                        
                        if (this.innerHTML.includes('far')) {
                            // Добавляем в избранное
                            this.innerHTML = '<i class="fas fa-heart"></i> В избранном';
                            
                            const carData = {
                                image: carCard.querySelector('.car-image').src,
                                model: model,
                                specs: carCard.querySelector('.car-specs').textContent,
                                price: carCard.querySelector('.car-price').textContent,
                                link: carCard.querySelector('a').href
                            };
                            
                            if (!favorites.some(car => car.model === carData.model)) {
                                favorites.push(carData);
                                localStorage.setItem('favoriteCars', JSON.stringify(favorites));
                            }
                        } else {
                            // Удаляем из избранного
                            this.innerHTML = '<i class="far fa-heart"></i> В избранное';
                            favorites = favorites.filter(car => car.model !== model);
                            localStorage.setItem('favoriteCars', JSON.stringify(favorites));
                        }
                    });
                });
    
                // Инициализируем кнопки удаления
                document.querySelectorAll('.delete-ad-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const adId = this.dataset.adId;
                        if (confirm('Вы уверены, что хотите удалить это объявление?')) {
                            let ads = JSON.parse(localStorage.getItem('carAds')) || [];
                            ads = ads.filter(ad => ad.id !== adId);
                            localStorage.setItem('carAds', JSON.stringify(ads));
                            this.closest('.car-card').remove();
                        }
                    });
                });
            }
    
            // Загружаем объявления при старте
            loadAds();
        });
    </script>

</body>
</html>